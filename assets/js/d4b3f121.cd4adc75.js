(self.webpackChunk=self.webpackChunk||[]).push([[722],{3905:(e,t,n)=>{"use strict";n.d(t,{Zo:()=>u,kt:()=>m});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=p(n),m=r,y=d["".concat(s,".").concat(m)]||d[m]||c[m]||o;return n?a.createElement(y,i(i({ref:t},u),{},{components:n})):a.createElement(y,i({ref:t},u))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var p=2;p<o;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},3919:(e,t,n)=>{"use strict";function a(e){return!0===/^(\w*:|\/\/)/.test(e)}function r(e){return void 0!==e&&!a(e)}n.d(t,{b:()=>a,Z:()=>r})},4996:(e,t,n)=>{"use strict";n.d(t,{C:()=>o,Z:()=>i});var a=n(2263),r=n(3919);function o(){var e=(0,a.default)().siteConfig,t=(e=void 0===e?{}:e).baseUrl,n=void 0===t?"/":t,o=e.url;return{withBaseUrl:function(e,t){return function(e,t,n,a){var o=void 0===a?{}:a,i=o.forcePrependBaseUrl,l=void 0!==i&&i,s=o.absolute,p=void 0!==s&&s;if(!n)return n;if(n.startsWith("#"))return n;if((0,r.b)(n))return n;if(l)return t+n;var u=n.startsWith(t)?n:t+n.replace(/^\//,"");return p?e+u:u}(o,n,e,t)}}}function i(e,t){return void 0===t&&(t={}),(0,o().withBaseUrl)(e,t)}},9443:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});const a=(0,n(7294).createContext)(void 0)},944:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var a=n(7294),r=n(9443);const o=function(){var e=(0,a.useContext)(r.Z);if(null==e)throw new Error("`useUserPreferencesContext` is used outside of `Layout` Component.");return e}},1565:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>b,frontMatter:()=>f,metadata:()=>g,toc:()=>v});var a=n(2122),r=n(9756),o=n(7294),i=n(3905),l=n(4996),s=n(944),p=n(6010);const u="tabItem_1uMI",c="tabItemActive_2DSg";var d=37,m=39;const y=function(e){var t=e.lazy,n=e.block,a=e.defaultValue,r=e.values,i=e.groupId,l=e.className,y=(0,s.Z)(),h=y.tabGroupChoices,k=y.setTabGroupChoices,f=(0,o.useState)(a),g=f[0],v=f[1],N=o.Children.toArray(e.children),b=[];if(null!=i){var P=h[i];null!=P&&P!==g&&r.some((function(e){return e.value===P}))&&v(P)}var w=function(e){var t=e.currentTarget,n=b.indexOf(t),a=r[n].value;v(a),null!=i&&(k(i,a),setTimeout((function(){var e,n,a,r,o,i,l,s;(e=t.getBoundingClientRect(),n=e.top,a=e.left,r=e.bottom,o=e.right,i=window,l=i.innerHeight,s=i.innerWidth,n>=0&&o<=s&&r<=l&&a>=0)||(t.scrollIntoView({block:"center",behavior:"smooth"}),t.classList.add(c),setTimeout((function(){return t.classList.remove(c)}),2e3))}),150))},C=function(e){var t,n;switch(e.keyCode){case m:var a=b.indexOf(e.target)+1;n=b[a]||b[0];break;case d:var r=b.indexOf(e.target)-1;n=b[r]||b[b.length-1]}null==(t=n)||t.focus()};return o.createElement("div",{className:"tabs-container"},o.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,p.Z)("tabs",{"tabs--block":n},l)},r.map((function(e){var t=e.value,n=e.label;return o.createElement("li",{role:"tab",tabIndex:g===t?0:-1,"aria-selected":g===t,className:(0,p.Z)("tabs__item",u,{"tabs__item--active":g===t}),key:t,ref:function(e){return b.push(e)},onKeyDown:C,onFocus:w,onClick:w},n)}))),t?(0,o.cloneElement)(N.filter((function(e){return e.props.value===g}))[0],{className:"margin-vert--md"}):o.createElement("div",{className:"margin-vert--md"},N.map((function(e,t){return(0,o.cloneElement)(e,{key:t,hidden:e.props.value!==g})}))))};const h=function(e){var t=e.children,n=e.hidden,a=e.className;return o.createElement("div",{role:"tabpanel",hidden:n,className:a},t)};var k=["components"],f={id:"pysa-quickstart",title:"Quickstart",description:"Quickstart guide to get Pysa and SAPP running on your project",sidebar_label:"Quickstart"},g={unversionedId:"pysa-quickstart",id:"pysa-quickstart",isDocsHomePage:!1,title:"Quickstart",description:"Quickstart guide to get Pysa and SAPP running on your project",source:"@site/docs/pysa_quickstart.md",sourceDirName:".",slug:"/pysa-quickstart",permalink:"/docs/pysa-quickstart",editUrl:"https://github.com/facebook/pyre-check/tree/master/documentation/website/docs/pysa_quickstart.md",version:"current",sidebar_label:"Quickstart",frontMatter:{id:"pysa-quickstart",title:"Quickstart",description:"Quickstart guide to get Pysa and SAPP running on your project",sidebar_label:"Quickstart"},sidebar:"pysa",next:{title:"Overview",permalink:"/docs/pysa-basics"}},v=[{value:"Overview",id:"overview",children:[]},{value:"Install dependencies",id:"install-dependencies",children:[]},{value:"Initial configuration",id:"initial-configuration",children:[]},{value:"Run Pysa",id:"run-pysa",children:[]},{value:"Run SAPP",id:"run-sapp",children:[]},{value:"Going beyond the basics",id:"going-beyond-the-basics",children:[]},{value:"Common Issues",id:"common-issues",children:[]}],N={toc:v};function b(e){var t=e.components,n=(0,r.Z)(e,k);return(0,i.kt)("wrapper",(0,a.Z)({},N,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"overview"},"Overview"),(0,i.kt)("p",null,"By the end of this guide, you will be able to run Pysa to find bugs on most Python web servers, and view those bugs on ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/facebook/sapp"},"Static Analysis Post Processor (SAPP)"),"."),(0,i.kt)("p",null,"This guide was tested on ",(0,i.kt)("em",{parentName:"p"},"Ubuntu 18.04.5 LTS"),", ",(0,i.kt)("em",{parentName:"p"},"macOS 10.15.7"),", and ",(0,i.kt)("em",{parentName:"p"},"Ubuntu 20.04 LTS on WSL1")),(0,i.kt)("p",null,"If you run into any issues along the way, please refer to the ",(0,i.kt)("a",{parentName:"p",href:"#common-issues"},"common issues")," section to help you debug"),(0,i.kt)("h2",{id:"install-dependencies"},"Install dependencies"),(0,i.kt)(y,{groupId:"os",defaultValue:"mac",values:[{label:"Ubuntu",value:"ubuntu"},{label:"macOS",value:"mac"}],mdxType:"Tabs"},(0,i.kt)(h,{value:"mac",mdxType:"TabItem"},(0,i.kt)("p",null,"Pysa runs on Pyre, so we require the ",(0,i.kt)("a",{parentName:"p",href:"/docs/getting-started#requirements"},"same dependencies as Pyre"),". You will need Python 3.7 or later, and ",(0,i.kt)("inlineCode",{parentName:"p"},"setuptools")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"wheel")," Python packages."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"$ python3.8 -m pip install --upgrade setuptools\n$ pip3 install wheel\n"))),(0,i.kt)(h,{value:"ubuntu",mdxType:"TabItem"},(0,i.kt)("p",null,"Since the Python version included in Ubuntu 18.04.5 is Python 3.6.9, we will need to update Python to a newer version."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"$ sudo apt-get update\n$ sudo apt install python3.8 python3.8-venv python3.8-dev python3-pip -y\n")),(0,i.kt)("p",null,"Next we need to install ",(0,i.kt)("inlineCode",{parentName:"p"},"setuptools")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"wheel")," python packages:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"$ python3.8 -m pip install --upgrade setuptools\n$ pip3 install wheel\n")))),(0,i.kt)("h2",{id:"initial-configuration"},"Initial configuration"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Set up the virtual environment:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"$ python3.8 -m venv ~/.venvs/pysa\n$ source ~/.venvs/pysa/bin/activate\n")),(0,i.kt)("ol",{start:2},(0,i.kt)("li",{parentName:"ol"},"Install dependencies for your project")),(0,i.kt)("p",null,"You can check which packages are installed in your virtual environment by looking at the files in:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"(pysa) $ ls ~/.venvs/pysa/lib/python3.8/site-packages\n")),(0,i.kt)("p",null,"If you already have dependencies installed for your project in your virtual environment, you can skip this step. If not, usually Python projects will list their dependencies in a ",(0,i.kt)("inlineCode",{parentName:"p"},"requirements.txt")," file. If your project has a ",(0,i.kt)("inlineCode",{parentName:"p"},"requirements.txt")," file, you can install dependencies by:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"(pysa) $ pip install -r requirements.txt\n")),(0,i.kt)("p",null,"Installing your project dependencies in your virtual environment will allow Pysa to provide you better results, because it allows Pysa to use ",(0,i.kt)("a",{parentName:"p",href:"/docs/pysa-basics#model-files"},"models")," that correspond to those dependencies and detect ",(0,i.kt)("a",{parentName:"p",href:"/docs/pysa-basics#sources"},"sources")," and ",(0,i.kt)("a",{parentName:"p",href:"/docs/pysa-basics#sinks"},"sinks")," that might be hidden in your dependencies' code"),(0,i.kt)("ol",{start:3},(0,i.kt)("li",{parentName:"ol"},"Install Pyre and SAPP in the virtual environment:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"(pysa) $ pip install pyre-check fb-sapp\n")),(0,i.kt)("ol",{start:4},(0,i.kt)("li",{parentName:"ol"},"Create Pyre configuration file in the project directory you want to run Pysa on:")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"pyre init")," will set up a ",(0,i.kt)("a",{parentName:"p",href:"/docs/configuration"},"configuration file for Pyre (",(0,i.kt)("inlineCode",{parentName:"a"},".pyre_configuration"),")")," in your project's directory. The defaults for ",(0,i.kt)("inlineCode",{parentName:"p"},"pyre init")," should cover most projects."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"(pysa) $ cd /path/to/your/repo\n(pysa) $ pyre init\n")),(0,i.kt)("ol",{start:5},(0,i.kt)("li",{parentName:"ol"},"Optional, but recommended - Add type annotations automatically to your project:")),(0,i.kt)("p",null,"If your project uses Python 3.5 or later and isn't type annotated, running Pyre's type inference might improve your Pysa results. Note: this command will modify your code, but don't worry the type annotations won't affect your code at runtime if your project is running Python 3.5 or later."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"(pysa) $ pyre infer -r -i\n")),(0,i.kt)("ol",{start:6},(0,i.kt)("li",{parentName:"ol"},"Set up SAPP with some high signal filters")),(0,i.kt)("p",null,"Run the following command to set up SAPP and import a list of filters to help you start looking into issues once Pysa has found them:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"(pysa) $ sapp filter import ~/.venvs/pysa/lib/pyre_check/pysa_filters\n")),(0,i.kt)("h2",{id:"run-pysa"},"Run Pysa"),(0,i.kt)("p",null,"Now that Pysa is set up to run on your project, you won't need to repeat any of the earlier steps to run Pysa on subsequent runs. You can run Pysa with ",(0,i.kt)("inlineCode",{parentName:"p"},"pyre analyze"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"(pysa) $ pyre analyze --no-verify --save-results-to ./pysa-runs\n")),(0,i.kt)("p",null,"This command will run Pysa and store the results of the Pysa run into a ",(0,i.kt)("inlineCode",{parentName:"p"},"pysa-runs")," folder in your project directory. The output of Pysa runs will be used later by SAPP to help you filter and refine the results Pysa provides you."),(0,i.kt)("h2",{id:"run-sapp"},"Run SAPP"),(0,i.kt)("p",null,"After you have the results from your Pysa run stored in ",(0,i.kt)("inlineCode",{parentName:"p"},"pysa-runs"),", we will ingest those runs into SAPP for analysis with the following command:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"(pysa) $ sapp analyze ./pysa-runs/taint-output.json\n")),(0,i.kt)("p",null,"We imported some filters into SAPP earlier and now that SAPP has processed your latest Pysa run, you can run the following command to spawn the server for the SAPP Web UI at ",(0,i.kt)("a",{parentName:"p",href:"http://localhost:5000"},"http://localhost:5000"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"(pysa) $ sapp server\n")),(0,i.kt)("img",{alt:"SAPP Web UI for filtering Pysa issues",src:(0,l.Z)("img/sapp_web_ui.png")}),(0,i.kt)("p",null,'Through SAPP\'s Web UI, you can view and filter the issues Pysa found by clicking on the "Filter" button. A list of filters should appear under "Saved Filters" for you to choose from. Note that unfiltered Pysa issues can be noisy by default, so it is usually preferable to browse issues via these saved filters.'),(0,i.kt)("img",{alt:"SAPP Web UI applying filter to Pysa issues",src:(0,l.Z)("img/sapp_web_ui_filter.png")}),(0,i.kt)("h2",{id:"going-beyond-the-basics"},"Going beyond the basics"),(0,i.kt)("p",null,"We've provided you with some filters in SAPP to help you find a small subset of the bugs Pysa is able to catch. If you want to use Pysa to its full potential and find more bugs than the ones in your current Pysa run, you can learn how to write your own filters and tailor Pysa for your codebase below:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/pysa-basics"},"Introduction to Pysa")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://www.youtube.com/watch?v=8I3zlvtpOww"},"DEF CON 28 Pysa Tutorial")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/pysa-false-negatives"},"Pysa Debugging Tips")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/facebook/sapp#readme"},"SAPP Documentation"))),(0,i.kt)("h2",{id:"common-issues"},"Common Issues"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Problem"),": Installing my project dependencies while in my virtual environment gives me errors, because some of my project dependencies are not compatible with Python 3+."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Solution"),": Fortunately, you can still run Pysa and SAPP on your project, so feel free to continue with the Quickstart instructions. However, Pysa may miss some taint flows."),(0,i.kt)("hr",null),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Problem"),": ",(0,i.kt)("inlineCode",{parentName:"p"},"pip install fb-sapp")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"pip install pyre-check")," results in ",(0,i.kt)("inlineCode",{parentName:"p"},"ERROR: Could not install packages due to an OSError: [Error 13] Permission denied")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Solution"),": Likely you are not installing ",(0,i.kt)("inlineCode",{parentName:"p"},"fb-sapp")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"pyre-check")," in the ",(0,i.kt)("a",{parentName:"p",href:"#initial-configuration"},"virtual environment we created earlier"),". Try running ",(0,i.kt)("inlineCode",{parentName:"p"},"source ~/.venvs/pysa/bin/activate")," before running ",(0,i.kt)("inlineCode",{parentName:"p"},"pip install"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"$ source ~/.venvs/pysa/bin/activate\n(pysa) $ pip install pyre-check\n")),(0,i.kt)("hr",null),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Problem"),": ",(0,i.kt)("inlineCode",{parentName:"p"},"pip install fb-sapp")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"pip install pyre-check")," fails, because it has multiple compilation errors like"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"fatal error: Python.h: No such file or directory\n#include <Python.h>\n^~~~~~~~~~\ncompilation terminated.\nerror: command 'x86_64-linux-gnu-gcc' failed with exit status\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Solution"),": You are missing ",(0,i.kt)("inlineCode",{parentName:"p"},"setuptools")," python package or ",(0,i.kt)("inlineCode",{parentName:"p"},"python3.8-dev")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"$ sudo apt install python3.8-dev -y\n$ source ~/.venvs/pysa/bin/activate\n$ (pysa) python3.8 -m pip install --upgrade setuptools\n")),(0,i.kt)("hr",null),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Problem"),": Attempting to create a virtual environment with ",(0,i.kt)("inlineCode",{parentName:"p"},"python3.8 -m venv ~/.venvs/pysa")," results in ",(0,i.kt)("inlineCode",{parentName:"p"},"The virtual environment was not created successfully because ensurepip is not available.")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Solution"),": You are either missing ",(0,i.kt)("inlineCode",{parentName:"p"},"python3.8-venv")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"python3.8-dev")," package. Make sure you delete the directory created by the failed virtual environment command earlier."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"$ sudo apt install python3.8-venv python3.8-dev -y\n$ rm -rf ~/.venvs/pysa\n$ python3.8 -m venv ~/.venvs/pysa\n")),(0,i.kt)("hr",null),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Problem"),": Running ",(0,i.kt)("inlineCode",{parentName:"p"},"pip install fb-sapp")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"pip install pyre-check")," fails to install, because of a series of ",(0,i.kt)("inlineCode",{parentName:"p"},"error: invalid command 'bdist_wheel'")," errors"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Solution"),": You are missing either ",(0,i.kt)("inlineCode",{parentName:"p"},"wheel")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"setuptools")," package"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"$ (pysa) pip3 install wheel\n$ (pysa) python3.8 -m pip install --upgrade setuptools\n")),(0,i.kt)("hr",null),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Problem"),": ",(0,i.kt)("inlineCode",{parentName:"p"},"pyre init")," shows ",(0,i.kt)("inlineCode",{parentName:"p"},"\u019b Source directory path/to/dir does not exist. Be sure the source path is relative to the import_root"),"."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Solution"),": You will need to manually update ",(0,i.kt)("inlineCode",{parentName:"p"},"source_directories")," in ",(0,i.kt)("inlineCode",{parentName:"p"},".pyre_configuration"),". Refer to ",(0,i.kt)("a",{parentName:"p",href:"/docs/configuration#the-global-configuration"},"Pyre Global configuration section")," to set up ",(0,i.kt)("inlineCode",{parentName:"p"},"source_directories"),"."),(0,i.kt)("hr",null),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Problem"),": Running ",(0,i.kt)("inlineCode",{parentName:"p"},"pyre analyze --no-verify")," command results in ",(0,i.kt)("inlineCode",{parentName:"p"},"\u019b Error: Could not find a pyre client.")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Solution"),": Some shells (e.g. ",(0,i.kt)("inlineCode",{parentName:"p"},"zsh"),") require a restart to pick up updated PATH variables."),(0,i.kt)("p",null,"For example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-zsh"},"(pysa) $ pip install pyre-check\n(pysa) $ cd demo-project\n(pysa) $ pyre analyze --no-verify\n\u019b Error: Could not find a pyre client.\n(pysa) $ which pyre\n/usr/local/bin/pyre\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"which pyre")," points to a path not within the virtual environment (e.g. ",(0,i.kt)("inlineCode",{parentName:"p"},"/usr/local/bin"),")"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-zsh"},"(pysa) $ deactivate\n(pysa) $ zsh\n$ source ~/.venvs/pysa/bin/activate\n(pysa) $ which pyre\n/Users/unixname/.venvs/pysa/bin/\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"which pyre")," now points to a path in the virtual environment (e.g. ",(0,i.kt)("inlineCode",{parentName:"p"},"~/.venvs/pysa/bin/"),")"),(0,i.kt)("p",null,"Ideally, if you have a local installation of Pyre, it would be best to remove the installation and only install Pyre in a virtual environment."),(0,i.kt)("hr",null),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Problem"),": Running ",(0,i.kt)("inlineCode",{parentName:"p"},"pyre analyze")," results in a bunch of errors and Pysa stops running"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Solution"),": Run ",(0,i.kt)("inlineCode",{parentName:"p"},"pyre analyze --no-verify")," to skip model validation."),(0,i.kt)("hr",null),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Problem"),": Running ",(0,i.kt)("inlineCode",{parentName:"p"},"pyre analyze --no-verify")," will freeze when parsing stubs and sources or processing functions, but the seconds runtime timer is still increasing"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Solution"),": Unfortunately, it is likely the case that your machine doesn't have enough memory to run Pysa on projects with similar size to yours."),(0,i.kt)("hr",null),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Problem"),": ",(0,i.kt)("inlineCode",{parentName:"p"},"pyre analyze --no-verify")," exits with error ",(0,i.kt)("inlineCode",{parentName:"p"},'\u019b Uncaught exception: (Invalid_argument "~/.venvs/pysa/lib/pyre_check/typeshed/stdlib/zlib.pyi is not a directory")')),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Solution"),": Delete your virtual environment and recreate your virtual environment by following the steps in the ",(0,i.kt)("a",{parentName:"p",href:"#initial-configuration"},"Initial configuration")," section"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"(pysa) $ deactivate\n$ rm -rf ~/.venvs/pysa\n")),(0,i.kt)("hr",null),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Problem"),": I'm seeing a bunch of errors like ",(0,i.kt)("inlineCode",{parentName:"p"},"~/.venvs/pysa/lib/pyre_check/taint/filename.pysa: module.path.function_name is not part of the environment!")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Solution"),":\nIf you don't use the ",(0,i.kt)("inlineCode",{parentName:"p"},"module.path.function_name")," mentioned in your project, you can ignore them. Pysa ships with many taint models for code that isn't present in all projects. The errors you are seeing is Pysa informing you that Pysa hasn't found the source code for that particular function in your project or your venv."),(0,i.kt)("p",null,"If you do use the ",(0,i.kt)("inlineCode",{parentName:"p"},"module.path.function_name")," mentioned in your project and the package wasn't installed with ",(0,i.kt)("inlineCode",{parentName:"p"},"pip"),", you will need to add the package's path to ",(0,i.kt)("inlineCode",{parentName:"p"},"search_path")," in your ",(0,i.kt)("inlineCode",{parentName:"p"},".pyre_configuration"),". Eventually, your ",(0,i.kt)("inlineCode",{parentName:"p"},".pyre_configuration")," should look something like this:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "source_directories": [\n    "."\n  ],\n  "search_path": [\n    "path/to/external/library"\n  ],\n  "taint_models_path": "~/.venvs/pysa/lib",\n}\n')),(0,i.kt)("hr",null),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Problem"),": Running any ",(0,i.kt)("inlineCode",{parentName:"p"},"sapp")," command results in ",(0,i.kt)("inlineCode",{parentName:"p"},"SyntaxError: future feature annotations is not defined")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Solution"),": SAPP requires Python 3.7. Ensure you are running a Python version later than Python 3.7"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"$ python3 --version\n")),(0,i.kt)("hr",null),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Problem"),": Running any ",(0,i.kt)("inlineCode",{parentName:"p"},"sapp")," command results in a bunch of ",(0,i.kt)("inlineCode",{parentName:"p"},"SAWarning"),"s like"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"SAWarning: SAWarning: relationship 'Child.parent' will copy column parent.id to column child.parent_id, which conflicts with relationship(s): 'Parent.children' (copies parent.id to child.parent_id). If this is not the intention, consider if these relationships should be linked with back_populates, or if viewonly=True should be applied to one or more if they are read-only. For the less common case that foreign key constraints are partially overlapping, the orm.foreign() annotation can be used to isolate the columns that should be written towards. The 'overlaps' parameter may be used to remove this warning.\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Solution"),": Please ignore the ",(0,i.kt)("inlineCode",{parentName:"p"},"SAWarning"),"s. They don't affect the functionality of SAPP and everything should be working as intended."),(0,i.kt)("hr",null),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Problem"),": I can't connect to the Web UI and it displays an error related to SSL. The SAPP server log displays a bunch of ",(0,i.kt)("inlineCode",{parentName:"p"},"400 Bad Request")," error codes"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Solution"),": Make sure you are visiting ",(0,i.kt)("a",{parentName:"p",href:"http://localhost:5000"},(0,i.kt)("inlineCode",{parentName:"a"},"http://localhost:5000"))," and not ",(0,i.kt)("inlineCode",{parentName:"p"},"https://localhost:5000")),(0,i.kt)("hr",null),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Problem"),": If your SAPP server shows ",(0,i.kt)("inlineCode",{parentName:"p"},"404 Not found")," and the webpage shows ",(0,i.kt)("inlineCode",{parentName:"p"},"The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Solution"),": The SAPP Web UI will show this error when there are no issues imported during ",(0,i.kt)("inlineCode",{parentName:"p"},"sapp analyze"),". Check if Pysa has found any issues with your project and if SAPP has imported any of those issues."),(0,i.kt)("p",null,"Checking if Pysa found any issues - you should expect the following command return at least one line:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},'(pysa) $ cat taint-output.json | grep "issue"\n')),(0,i.kt)("p",null,"Checking which issues SAPP imported - you should expect the following lines to appear after running ",(0,i.kt)("inlineCode",{parentName:"p"},"sapp analyze"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"(pysa) $ sapp analyze\n[INFO] Parsing analysis output...\n[INFO] Generating issues and traces\n[INFO] Run starting...\n[INFO] Preparing bulk save.\n[INFO] Dropped 0 unused TraceKind.precondition, 0 are missing\n[INFO] Dropped 6 unused TraceKind.postcondition, 0 are missing\n[INFO] Saving 10 issues, 21 trace frames, 0 trace annotations, 50 trace frame leaf assocs\n...\n[INFO] Run finished (0:00:00)\n")),(0,i.kt)("hr",null),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Problem"),": The issues on SAPP Web UI have boxes with ",(0,i.kt)("inlineCode",{parentName:"p"},"No file found for filename.py"),", so I cannot see the source code related to the trace for my issues"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Solution"),": Try passing the path to your project source code with ",(0,i.kt)("inlineCode",{parentName:"p"},"--source-directory")," to ",(0,i.kt)("inlineCode",{parentName:"p"},"sapp server")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"(pysa) $ sapp server --source-directory path/to/project_source_code\n")),(0,i.kt)("hr",null),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Problem"),": Pysa still doesn't work despite trying everything above"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Solution"),": Ensure you are not running a nightly version of Pyre"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"(pysa) $ pip uninstall pyre-check-nightly\n(pysa) $ pip install pyre-check\n")),(0,i.kt)("p",null,"Some shells (e.g. zsh) will require extra steps:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-zsh"},"(pysa) $ pip uninstall pyre-check-nightly\n(pysa) $ deactivate\n$ zsh\n(pysa) $ source ~/.venvs/pysa/bin/activate\n(pysa) $ pip install pyre-check\n")),(0,i.kt)("p",null,"If you are still unable to get Pysa to run, please ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/facebook/pyre-check/issues"},"file an issue on pyre-check GitHub repo")," with some information about what OS you are running on, what error you are running into, and how to reproduce the error."))}b.isMDXComponent=!0},6010:(e,t,n)=>{"use strict";function a(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=a(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function r(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=a(e))&&(r&&(r+=" "),r+=t);return r}n.d(t,{Z:()=>r})}}]);