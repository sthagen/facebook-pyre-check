<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.69">
<script src="https://buttons.github.io/buttons.js"></script><title data-react-helmet="true">Quickstart | Pyre</title><meta data-react-helmet="true" property="og:image" content="https://pyre-check.org/img/docusaurus.png"><meta data-react-helmet="true" property="twitter:image" content="https://pyre-check.org/img/docusaurus.png"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for Pyre"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_language" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Quickstart | Pyre"><meta data-react-helmet="true" name="description" content="Quickstart guide to get Pysa and SAPP running on your project"><meta data-react-helmet="true" property="og:description" content="Quickstart guide to get Pysa and SAPP running on your project"><meta data-react-helmet="true" property="og:url" content="https://pyre-check.org/docs/pysa-quickstart"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://pyre-check.org/docs/pysa-quickstart"><link rel="stylesheet" href="/styles.a68c5bbe.css">
<link rel="preload" href="/styles.e7d921bf.js" as="script">
<link rel="preload" href="/runtime~main.48b0ec6e.js" as="script">
<link rel="preload" href="/main.b2236e0a.js" as="script">
<link rel="preload" href="/1.14ae4893.js" as="script">
<link rel="preload" href="/29.d075b393.js" as="script">
<link rel="preload" href="/31.49fc8d23.js" as="script">
<link rel="preload" href="/935f2afb.6c23649d.js" as="script">
<link rel="preload" href="/28.3e9a28ab.js" as="script">
<link rel="preload" href="/d4b3f121.5701804e.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script>
<div style="display: none; text-align: center; background-color: white; color: black;" id="internaldocs-banner"></div><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_2AhQ">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/integrated_logo_light.png" alt="Pyre Logo" class="themedImage_2E_h themedImage--light_AouX navbar__logo"><img src="/img/integrated_logo_light.png" alt="Pyre Logo" class="themedImage_2E_h themedImage--dark_1YPN navbar__logo"></a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a class="navbar__item navbar__link">Documentation</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/getting-started">Type Checking (Pyre)</a></li><li><a class="dropdown__link" href="/docs/pysa-basics">Static Analysis (Pysa)</a></li></ul></div><a class="navbar__item navbar__link"></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/pyre-check" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/integrated_logo_light.png" alt="Pyre Logo" class="themedImage_2E_h themedImage--light_AouX navbar__logo"><img src="/img/integrated_logo_light.png" alt="Pyre Logo" class="themedImage_2E_h themedImage--dark_1YPN navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="menu__link menu__link--sublist">Documentation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/getting-started">Type Checking (Pyre)</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/pysa-basics">Static Analysis (Pysa)</a></li></ul></li><li class="menu__list-item"><a class="menu__link"></a></li><li class="menu__list-item"><a href="https://github.com/facebook/pyre-check" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive thin-scrollbar menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" href="/docs/pysa-quickstart">Quickstart</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">How Pysa Works</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pysa-basics">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pysa-features">Feature Annotations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pysa-advanced">Advanced Topics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pysa-implementation-details">Implementation Details</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/pysa-running">Running Pysa</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Scaling Beyond Individual Models</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pysa-model-generators">Dynamically Generating Models</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pysa-model-dsl">Model DSL</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Development Tips</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pysa-false-negatives">Debugging False Negatives</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pysa-coverage">Coverage Increasing Strategies</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pysa-tips">General Tips</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/static-analysis-post-processor">Static Analysis Processor</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/pysa-additional-resources">Additional Resources</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/pysa-explore">Exploring Taint Models Interactively</a></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_39qw"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Quickstart</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="overview"></a>Overview<a class="hash-link" href="#overview" title="Direct link to heading">#</a></h2><p>By the end of this guide, you will be able to run Pysa to find bugs on most Python webservers, and view those bugs on <a href="https://github.com/facebook/sapp" target="_blank" rel="noopener noreferrer">Static Analysis Post Processor (SAPP)</a>.</p><p>This guide was tested on <em>Ubuntu 18.04.5 LTS</em> and <em>macOS 10.15.7</em></p><p>If you run into any issues along the way, please refer to the <a href="#common-issues">common issues</a> section to help you debug</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="installing-dependencies"></a>Installing dependencies<a class="hash-link" href="#installing-dependencies" title="Direct link to heading">#</a></h2><div><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="false" class="tabs__item tabItem_1w39">Ubuntu</li><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1w39 tabs__item--active">macOS</li></ul><div class="margin-vert--md"><div role="tabpanel"><p>Pysa runs on Pyre, so we require the <a href="/docs/getting-started#requirements">same dependencies as Pyre</a>. You will need Python 3.7 or later, and <code>setuptools</code> and <code>wheel</code> Python packages.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-bash codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ python3.8 -m pip </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> --upgrade setuptools</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ pip3 </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> wheel</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div></div><div role="tabpanel" hidden=""><p>Since the Python version included in Ubuntu 18.04.5 is Python 3.6.9, we will need to update Python to a version later than Python 3.7</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-bash codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">apt-get</span><span class="token plain"> update</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">apt</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> python3.8 python3.8-venv python3.8-dev python3-pip -y</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>Next we need to install <code>setuptools</code> and <code>wheel</code> python packages:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-bash codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ python3.8 -m pip </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> --upgrade setuptools</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ pip3 </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> wheel</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="initial-configuration"></a>Initial configuration<a class="hash-link" href="#initial-configuration" title="Direct link to heading">#</a></h2><ol><li>Setting up virtual environment:</li></ol><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-bash codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ python3.8 -m venv ~/.venvs/pysa</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">source</span><span class="token plain"> ~/.venvs/pysa/bin/activate</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><ol start="2"><li>Installing Pyre and SAPP in our virtual environment:</li></ol><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-bash codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">pysa</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> $ pip </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> pyre-check fb-sapp</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><ol start="3"><li>Install dependencies for your project</li></ol><p>If you already have dependencies installed for your project in your virtual environment, you can skip this step. If not, usually Python projects will list their dependencies in a <code>requirements.txt</code> file. If your project has a <code>requirements.txt</code> file, you can install dependencies by:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(pysa) $ pip install -r requirements.txt</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>Installing your project dependencies in your virtual environment will allow Pysa to provide you better results, because it allows Pysa to use <a href="/docs/pysa-basics#model-files">models</a> that correspond to those dependencies and detect <a href="/docs/pysa-basics#sources">sources</a> and <a href="/docs/pysa-basics#sinks">sinks</a> that might be hidden in your dependencies&#x27; code</p><ol start="4"><li>Create Pyre configuration file in the project directory you want to run Pysa on:</li></ol><p><code>pyre init</code> will set up a <a href="/docs/configuration">configuration file for Pyre (<code>.pyre_configuration</code>)</a> in your project&#x27;s directory. The defaults for <code>pyre init</code> should cover most projects, but if you want more granular control over which files you want to run Pysa on, you can create and tweak <a href="/docs/configuration#local-configurations">local configurations</a> to your needs.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-bash codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">pysa</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> $ </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> /path/to/your/repo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">pysa</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> $ pyre init</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>If your project uses any Python packages that you haven&#x27;t installed with <code>pip</code> in step 3, you will need to add them to <code>.pyre_configuration</code> with the <code>search_path</code>. Eventually, your (<code>.pyre_configuration</code>) should look something like this:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;source_directories&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;.&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ],</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;search_path&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;path/to/external/library&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ],</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;taint_models_path&quot;: &quot;~/.venvs/pysa/lib&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>Also ensure the path corresponding to <code>taint_models_path</code> in <code>.pyre_configuration</code> contains the remaining Python packages you use in your project:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(pysa) $ ls ~/.venvs/pysa/lib/python3.8/site-packages</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>If you are missing any packages, refer back to step 3.</p><p>If you have any package-level imports, you may need to specify that in your <code>.pyre_configuration</code> or Pysa may be unable to analyze those packages. For example, if you have import statements, like <code>from package_name.a.b import X</code>, you will need to add the following to your <code>.pyre_configuration</code>:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;source_directories&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;root&quot;: &quot;.&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;subdirectory&quot;: &quot;package_name&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ],</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;search_path&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;path/to/external/library&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ],</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;taint_models_path&quot;: &quot;~/.venvs/pysa/lib&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><ol start="5"><li>Optional, but recommended - Adding type annotations automatically to your project:</li></ol><p>If your project isn&#x27;t type annotated, running Pyre&#x27;s type inference might improve your Pysa results. Note this command will modify your code, but don&#x27;t worry the type annotations won&#x27;t affect your code at runtime.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(pysa) $ pyre -l . infer -r -i</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><ol start="6"><li>Setting up SAPP with some high signal filters
Run the following command to set up SAPP and import a list of filters to help you start looking into issues once Pysa has found them:</li></ol><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">sapp import-filter filter-filename.json</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="running-pysa"></a>Running Pysa<a class="hash-link" href="#running-pysa" title="Direct link to heading">#</a></h2><p>Now that Pysa is set up to run on your project, you won&#x27;t need to repeat any of the earlier steps to run Pysa on subsequent runs. You can run Pysa with <code>pyre analyze</code>.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-bash codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">pyre analyze --no-verify --save-results-to ./pysa-runs</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>This command will run Pysa and store the results of the Pysa run into a <code>pysa-runs</code> folder in your project directory. The output of Pysa runs will be used later by SAPP to help you filter and refine the results Pysa provides you.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="running-sapp"></a>Running SAPP<a class="hash-link" href="#running-sapp" title="Direct link to heading">#</a></h2><p>After you have the results from your Pysa run stored in <code>pysa-runs</code>, we will ingest those runs into SAPP for analysis with the following command:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-bash codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">sapp analyze ./pysa-runs/taint-output.json</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>We imported some filters into SAPP earlier and now that SAPP has processed your latest Pysa run, you can run the following command to open the <a href="http://localhost:5000" target="_blank" rel="noopener noreferrer">SAPP Web UI</a>, where you can filter and view the issues from Pysa at <a href="http://localhost:5000" target="_blank" rel="noopener noreferrer">http://localhost:5000</a>:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">sapp server</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><img alt="SAPP Web UI for filtering Pysa issues" src="/img/sapp_web_ui.png"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="going-beyond-the-basics"></a>Going beyond the basics<a class="hash-link" href="#going-beyond-the-basics" title="Direct link to heading">#</a></h2><p>We&#x27;ve provided you with some filters in SAPP to help you find a small subset of the bugs Pysa is able to catch. If you want to use Pysa to its full potential and find more bugs than the ones in your current Pysa run, you can learn how to write your own filters and tailor Pysa for your codebase below:</p><ul><li><a href="/docs/pysa-basics">Introduction to Pysa</a></li><li><a href="https://www.youtube.com/watch?v=8I3zlvtpOww" target="_blank" rel="noopener noreferrer">DEF CON 28 Pysa Tutorial</a></li><li><a href="/docs/pysa-false-negatives">Pysa Debugging Tips</a></li><li><a href="/docs/static-analysis-post-processor">SAPP Documentation</a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="common-issues"></a>Common Issues<a class="hash-link" href="#common-issues" title="Direct link to heading">#</a></h2><p><strong>Problem</strong>: Running Pysa results in <code>ƛ Error: Could not find a pyre client.</code></p><p><strong>Solution</strong>: Some shells (e.g. <code>zsh</code>) require a restart to pick up updated PATH variables.</p><p>For example:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-zsh codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(pysa) $ pip install pyre-check</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(pysa) $ cd demo-project</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(pysa) $ pyre analyze --no-verify</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ƛ Error: Could not find a pyre client.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(pysa) $ which pyre</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/usr/local/bin/pyre</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p><code>which pyre</code> points to a path not within the virtual environment (e.g. <code>/usr/local/bin</code>)</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-zsh codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(pysa) $ deactivate</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(pysa) $ zsh</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ source ~/.venvs/pysa/bin/activate</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(pysa) $ which pyre</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/Users/unixname/.venvs/pysa/bin/</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p><code>which pyre</code> now points to a path in the virtual environment (e.g. <code>~/.venvs/pysa/bin/</code>)</p><p>Ideally, if you have a local installation of Pyre, it would be best to remove the installation and only install Pyre in a virtual environment.</p><hr><p><strong>Problem</strong>: <code>pip install fb-sapp</code> or <code>pip install pyre-check</code> results in <code>ERROR: Could not install packages due to an OSError: [Error 13] Permission denied</code></p><p><strong>Solution</strong>: Likely you are not installing <code>fb-sapp</code> or <code>pyre-check</code> in the <a href="#initial-configuration">virtual environment we created earlier</a>. Try running <code>source ~/.venvs/pysa/bin/activate</code> before running <code>pip install</code>.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-bash codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">source</span><span class="token plain"> ~/.venvs/pysa/bin/activate</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">pysa</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> $ pip </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> pyre-check</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><hr><p><strong>Problem</strong>: <code>pip install fb-sapp</code> or <code>pip install pyre-check</code> fails, because it has multiple compilation errors like</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">fatal error: Python.h: No such file or directory</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#include &lt;Python.h&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">^~~~~~~~~~</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">compilation terminated.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">error: command &#x27;x86_64-linux-gnu-gcc&#x27; failed with exit status</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p><strong>Solution</strong>: You are missing <code>setuptools</code> python package or <code>python3.8-dev</code></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ sudo apt install python3.8-dev -y</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ source ~/.venvs/pysa/bin/activate</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ (pysa) python3.8 -m pip install --upgrade setuptools</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><hr><p><strong>Problem</strong>: Attempting to create a virtual environment with <code>python3.8 -m venv ~/.venvs/pysa</code> results in <code>The virtual environment was not created successfully because ensurepip is not available.</code></p><p><strong>Solution</strong>: You are either missing <code>python3.8-venv</code> or <code>python3.8-dev</code> package. Make sure you delete the directory created by the failed virtual environment command earlier.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-bash codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">apt</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> python3.8-venv python3.8-dev -y</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">rm</span><span class="token plain"> -rf ~/.venvs/pysa</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ python3.8 -m venv ~/.venvs/pysa</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><hr><p><strong>Problem</strong>: Running <code>pip install fb-sapp</code> or <code>pip install pyre-check</code> fails to install, because of a series of <code>error: invalid command &#x27;bdist_wheel&#x27;</code> errors</p><p><strong>Solution</strong>: You are missing either <code>wheel</code> or <code>setuptools</code> package</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-bash codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">pysa</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> pip3 </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> wheel</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">pysa</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> python3.8 -m pip </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> --upgrade setuptools</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><hr><p><strong>Problem</strong>: Running <code>pyre analyze</code> results in a bunch of errors and Pysa stops running</p><p><strong>Solution</strong>: Run <code>pyre analyze --no-verify</code> to skip model validation.</p><hr><p><strong>Problem</strong>: Running <code>pyre analyze --no-verify</code> will freeze when parsing stubs and sources or processing functions, but the seconds runtime timer is still increasing</p><p><strong>Solution</strong>: Unfortunately, it is likely the case that your machine doesn&#x27;t have enough memory to run Pysa on projects with similar size to yours.</p><hr><p><strong>Problem</strong>: Running any <code>sapp</code> command results in <code>SyntaxError: future feature annotations is not defined</code></p><p><strong>Solution</strong>: SAPP requires Python 3.7. Ensure you are running a Python version later than Python 3.7</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-bash codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ python3 --version</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><hr><p><strong>Problem</strong>: I can&#x27;t connect to the Web UI and it displays an error related to SSL. The SAPP server log displays a bunch of <code>400 Bad Request</code> error codes</p><p><strong>Solution</strong>: Make sure you are visiting <a href="http://localhost:5000" target="_blank" rel="noopener noreferrer"><code>http://localhost:5000</code></a> and not <code>https://localhost:5000</code></p><hr><p><strong>Problem</strong>: I&#x27;m seeing a bunch of errors like <code>~/.venvs/pysa/lib/pyre_check/taint/filename.pysa: module.path.function_name is not part of the environment!</code></p><p><strong>Solution</strong>: If you don&#x27;t use the <code>module.path.function_name</code> mentioned, in your project, you can ignore them. Pysa ships with many taint models for code that isn&#x27;t present in all projects. The errors you are seeing is Pysa informing you that Pysa hasn&#x27;t found the source code for that particular function in your project.</p><hr><p><strong>Problem</strong>: If your SAPP server shows <code>404 Not found</code> and the webpage shows <code>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</code></p><p><strong>Solution</strong>: The SAPP Web UI will show this error when there are no issues imported during <code>sapp analyze</code>. Check if Pysa has found any issues with your project and if SAPP has imported any of those issues.</p><p>Checking if Pysa found any issues - you should expect the following command return at least one line:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(pysa) $ cat taint-output.json | grep &quot;issue&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>Checking which issues SAPP imported - you should expect the following lines to appear after running <code>sapp analyze</code>:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(pysa) $ sapp analyze</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[INFO] Parsing analysis output...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[INFO] Generating issues and traces</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[INFO] Run starting...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[INFO] Preparing bulk save.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[INFO] Dropped 0 unused TraceKind.precondition, 0 are missing</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[INFO] Dropped 6 unused TraceKind.postcondition, 0 are missing</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[INFO] Saving 10 issues, 21 trace frames, 0 trace annotations, 50 trace frame leaf assocs</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[INFO] Run finished (0:00:00)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><hr><p><strong>Problem</strong>: Pysa still doesn&#x27;t work despite trying everything above</p><p><strong>Solution</strong>: Ensure you are not running a nightly version of Pyre</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-bash codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">pysa</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> $ pip uninstall pyre-check-nightly</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">pysa</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> $ pip </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> pyre-check</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>Some shells (e.g. zsh) will require extra steps:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-zsh codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(pysa) $ pip uninstall pyre-check-nightly</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(pysa) $ deactivate</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ zsh</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(pysa) $ source ~/.venvs/pysa/bin/activate</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(pysa) $ pip install pyre-check</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>If you are still unable to get Pysa to run, please <a href="https://github.com/facebook/pyre-check/issues" target="_blank" rel="noopener noreferrer">file an issue on pyre-check GitHub repo</a> with some information about what OS you are running on, what error you are running into and how to reproduce the error</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/facebook/pyre-check/tree/master/documentation/website/docs/pysa_quickstart.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/pysa-basics"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Overview »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_ thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link">Overview</a></li><li><a href="#installing-dependencies" class="table-of-contents__link">Installing dependencies</a></li><li><a href="#initial-configuration" class="table-of-contents__link">Initial configuration</a></li><li><a href="#running-pysa" class="table-of-contents__link">Running Pysa</a></li><li><a href="#running-sapp" class="table-of-contents__link">Running SAPP</a></li><li><a href="#going-beyond-the-basics" class="table-of-contents__link">Going beyond the basics</a></li><li><a href="#common-issues" class="table-of-contents__link">Common Issues</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Legal</h4><ul class="footer__items"><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy/" target="_blank" rel="noreferrer noopener" class="footer__link-item">Privacy</a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms/" target="_blank" rel="noreferrer noopener" class="footer__link-item">Terms</a></li></ul></div></div><div class="text--center"><div class="margin-bottom--sm"><a href="https://opensource.facebook.com/" target="_blank" rel="noopener noreferrer" class="footerLogoLink_1zJy"><img class="footer__logo" alt="Facebook Open Source Logo" src="https://docusaurus.io/img/oss_logo.png"></a></div><div>Copyright &#169; 2021 Facebook, Inc.</div></div></div></footer></div>
<script src="/styles.e7d921bf.js"></script>
<script src="/runtime~main.48b0ec6e.js"></script>
<script src="/main.b2236e0a.js"></script>
<script src="/1.14ae4893.js"></script>
<script src="/29.d075b393.js"></script>
<script src="/31.49fc8d23.js"></script>
<script src="/935f2afb.6c23649d.js"></script>
<script src="/28.3e9a28ab.js"></script>
<script src="/d4b3f121.5701804e.js"></script>
</body>
</html>