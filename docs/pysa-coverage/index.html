<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.61">
<script src="https://buttons.github.io/buttons.js"></script><title data-react-helmet="true">Coverage Increasing Strategies | Pyre</title><meta data-react-helmet="true" property="og:image" content="https://pyre-check.org/img/docusaurus.png"><meta data-react-helmet="true" property="twitter:image" content="https://pyre-check.org/img/docusaurus.png"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for Pyre"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Coverage Increasing Strategies | Pyre"><meta data-react-helmet="true" name="description" content="Pysa relies on good type information and compete models in order to accurately analyze code. This page describes a number of strategies for increasing typing and model coverage to help Pysa. These strategies can be used once, with the results committed to your repository, or run as an ephemeral step in your analysis process prior to running pyre analyze."><meta data-react-helmet="true" property="og:description" content="Pysa relies on good type information and compete models in order to accurately analyze code. This page describes a number of strategies for increasing typing and model coverage to help Pysa. These strategies can be used once, with the results committed to your repository, or run as an ephemeral step in your analysis process prior to running pyre analyze."><meta data-react-helmet="true" property="og:url" content="https://pyre-check.org/docs/pysa-coverage"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://pyre-check.org/docs/pysa-coverage"><link rel="stylesheet" href="/styles.3e202baf.css">
<link rel="preload" href="/styles.7696051c.js" as="script">
<link rel="preload" href="/runtime~main.2bd01caa.js" as="script">
<link rel="preload" href="/main.2f5d4eb8.js" as="script">
<link rel="preload" href="/1.a9560985.js" as="script">
<link rel="preload" href="/2.dcd95191.js" as="script">
<link rel="preload" href="/24.00cfe1bc.js" as="script">
<link rel="preload" href="/25.bd43dc6c.js" as="script">
<link rel="preload" href="/20ac7829.0ea97193.js" as="script">
<link rel="preload" href="/17896441.acf556e5.js" as="script">
<link rel="preload" href="/60c97dcd.35019190.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script>
<div style="display: none; text-align: center; background-color: white; color: black;" id="internaldocs-banner"></div><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/integrated_logo_light.png" alt="Pyre Logo"><strong class="navbar__title"></strong></a><a class="navbar__item navbar__link" href="/docs/getting-started">Documentation</a><a target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/pyre-check" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/integrated_logo_light.png" alt="Pyre Logo"><strong class="navbar__title"></strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/getting-started">Documentation</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" class="menu__link"></a></li><li class="menu__list-item"><a href="https://github.com/facebook/pyre-check" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Pyre</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/getting-started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/installation">Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/configuration">Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/types-in-python">Types in Python</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/errors">Errors</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/querying-pyre">Querying Pyre</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Pysa</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pysa-basics">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pysa-running">Running Pysa</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pysa-features">Feature Annotations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pysa-advanced">Advanced Topics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pysa-model-generators">Dynamically Generating Models</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pysa-model-dsl">Model DSL</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pysa-tips">Development Tips</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/pysa-coverage">Coverage Increasing Strategies</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/static-analysis-post-processor">Static Analysis Processor</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pysa-additional-resources">Additional Resources</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Coverage Increasing Strategies</h1></header><div class="markdown"><p>Pysa relies on good type information and compete models in order to accurately analyze code. This page describes a number of strategies for increasing typing and model coverage to help Pysa. These strategies can be used once, with the results committed to your repository, or run as an ephemeral step in your analysis process prior to running <code>pyre analyze</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="pyre-infer"></a><code>pyre infer</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#pyre-infer" title="Direct link to heading">#</a></h2><p>Pyre comes with a built-in type inference feature. From the root of your project, run <code>pyre infer -r -i</code> to make recursive in-place edits to add type information.</p><p>Note: There is currently a bug with using the above arguments with the infer feature. The workaround is to break it into two commands:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">pyre infer -r</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">pyre infer -i --annotate-from-existing-stubs</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="preprocessors"></a>Preprocessors<a aria-hidden="true" tabindex="-1" class="hash-link" href="#preprocessors" title="Direct link to heading">#</a></h2><p>Pysa comes with a number of preprocessors intended to dynamically generate models for a project. Read <a href="/docs/pysa-model-generators">this page</a> to learn about the preprocessors that are currently available, and how to write your own. For best results, every entry point to your application (eg. view function for a Django web server) should have a hand written or preprocessor-generated model.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="quick-and-dirty-scripts"></a>Quick and Dirty Scripts<a aria-hidden="true" tabindex="-1" class="hash-link" href="#quick-and-dirty-scripts" title="Direct link to heading">#</a></h2><p>Sometimes, code has conventions that convey typing/model information that just needs to be translated to a form Pysa understands. Don&#x27;t be afraid of quick and dirty scripts to encode that information in a meaningful way.</p><p>For example, do all your Django view functions live in a file called <code>views.py</code> and have an untyped <code>request</code> argument as the first argument? Can you just do a quick <code>grep</code> + <code>sed</code> to add the <code>HttpRequest</code> type annotation to all of those parameters? Pysa has a ton of pre-written models for <code>HttpRequest</code>, so a small typing change like that can cover a ton of entry points.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="hand-crafted-models"></a>Hand Crafted Models<a aria-hidden="true" tabindex="-1" class="hash-link" href="#hand-crafted-models" title="Direct link to heading">#</a></h2><p>Consider all the ways that your application takes user input, and check to see if Pysa already has models written or not. For example, if you&#x27;re using Flask as your web server rather than Django, you&#x27;ll find Pysa doesn&#x27;t currently have any pre-written models for Flask. You&#x27;ll need to write some models following the instructions in the <a href="/docs/pysa-basics">previous pages of our docs</a>. If the models are generally useful to others, please consider putting up a pull request to contribute them back to Pysa.</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/pysa-tips"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Development Tips</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/static-analysis-post-processor"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Static Analysis Post Processor »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3klQ"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#pyre-infer" class="table-of-contents__link"><code>pyre infer</code></a></li><li><a href="#preprocessors" class="table-of-contents__link">Preprocessors</a></li><li><a href="#quick-and-dirty-scripts" class="table-of-contents__link">Quick and Dirty Scripts</a></li><li><a href="#hand-crafted-models" class="table-of-contents__link">Hand Crafted Models</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="text--center"><div class="margin-bottom--sm"><a href="https://opensource.facebook.com/" target="_blank" rel="noopener noreferrer" class="footerLogoLink_1zJy"><img class="footer__logo" alt="Facebook Open Source Logo" src="https://docusaurus.io/img/oss_logo.png"></a></div><div>Copyright &#169; 2020 Facebook, Inc.</div></div></div></footer></div>
<script src="/styles.7696051c.js"></script>
<script src="/runtime~main.2bd01caa.js"></script>
<script src="/main.2f5d4eb8.js"></script>
<script src="/1.a9560985.js"></script>
<script src="/2.dcd95191.js"></script>
<script src="/24.00cfe1bc.js"></script>
<script src="/25.bd43dc6c.js"></script>
<script src="/20ac7829.0ea97193.js"></script>
<script src="/17896441.acf556e5.js"></script>
<script src="/60c97dcd.35019190.js"></script>
</body>
</html>