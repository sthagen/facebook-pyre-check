(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{74:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return c})),t.d(n,"metadata",(function(){return l})),t.d(n,"rightToc",(function(){return i})),t.d(n,"default",(function(){return b}));var a,s=t(3),o=t(7),r=(t(0),t(96)),c={id:"static-analysis-post-processor",title:"Static Analysis Post Processor",sidebar_label:"Static Analysis Processor"},l={unversionedId:"static-analysis-post-processor",id:"static-analysis-post-processor",isDocsHomePage:!1,title:"Static Analysis Post Processor",description:"The pyre analyze command runs static analysis and outputs the result as JSON.",source:"@site/docs/static_analysis_post_processor.md",slug:"/static-analysis-post-processor",permalink:"/docs/static-analysis-post-processor",editUrl:"https://github.com/facebook/pyre-check/tree/master/documentation/website/docs/static_analysis_post_processor.md",version:"current",sidebar_label:"Static Analysis Processor",sidebar:"pysa",previous:{title:"General Tips",permalink:"/docs/pysa-tips"},next:{title:"Additional Resources",permalink:"/docs/pysa-additional-resources"}},i=[{value:"Installation",id:"installation",children:[]},{value:"Example",id:"example",children:[{value:"Parsing the JSON",id:"parsing-the-json",children:[]},{value:"Issue Exploration",id:"issue-exploration",children:[]}]},{value:"Commands",id:"commands",children:[{value:"Information commands",id:"information-commands",children:[]},{value:"Display commands",id:"display-commands",children:[]},{value:"Selection commands",id:"selection-commands",children:[]},{value:"Trace commands",id:"trace-commands",children:[]},{value:"Debugging commands",id:"debugging-commands",children:[]}]}],p=(a="Internal",function(e){return console.warn("Component "+a+" was not imported, exported, or provided by MDXProvider as global scope"),Object(r.b)("div",e)}),u={rightToc:i};function b(e){var n=e.components,t=Object(o.a)(e,["components"]);return Object(r.b)("wrapper",Object(s.a)({},u,t,{components:n,mdxType:"MDXLayout"}),Object(r.b)("p",null,"The ",Object(r.b)("inlineCode",{parentName:"p"},"pyre analyze")," command runs static analysis and outputs the result as JSON.\nThe Static Analysis Post Processor (SAPP) tool can process these results and\nallows the user to explore the results."),Object(r.b)("p",null,"See ",Object(r.b)("a",Object(s.a)({parentName:"p"},{href:"#commands"}),"commands")," for the available commands in explore mode."),Object(r.b)("h2",{id:"installation"},"Installation"),Object(r.b)("p",null,"SAPP comes as a separate PyPI package and you can install it with"),Object(r.b)("pre",null,Object(r.b)("code",Object(s.a)({parentName:"pre"},{className:"language-shell"}),"[~/static_analysis_example] $ pip install fb-sapp\n")),Object(r.b)("h2",{id:"example"},"Example"),Object(r.b)("p",null,"This assumes you have followed the\n",Object(r.b)("a",Object(s.a)({parentName:"p"},{href:"/docs/pysa-running#example"}),'"Running Pysa" example')," already."),Object(r.b)("h3",{id:"parsing-the-json"},"Parsing the JSON"),Object(r.b)("p",null,"The JSON output from ",Object(r.b)("inlineCode",{parentName:"p"},"pyre analyze")," can be difficult to read."),Object(r.b)("pre",null,Object(r.b)("code",Object(s.a)({parentName:"pre"},{className:"language-shell"}),"[~/static_analysis_example] $ sapp --database-name sapp.db analyze ./taint-output.json\n")),Object(r.b)("p",null,"will parse the JSON file and make it easier to work with. It will save the\nresults to a local sqlite file ",Object(r.b)("inlineCode",{parentName:"p"},"sapp.db"),"."),Object(r.b)("h3",{id:"issue-exploration"},"Issue Exploration"),Object(r.b)("pre",null,Object(r.b)("code",Object(s.a)({parentName:"pre"},{className:"language-shell"}),"[~/static_analysis_example] $ sapp --database-name sapp.db explore\n")),Object(r.b)("p",null,"This will launch a custom IPython interface that's connected to the sqlite file.\nIn this mode, you can dig into the issues that Pyre surfaces. Following is an\nexample of how to use the various commands."),Object(r.b)("p",null,"Start out by listing all known issues:"),Object(r.b)("pre",null,Object(r.b)("code",Object(s.a)({parentName:"pre"},{className:"language-text"}),"==========================================================\nInteractive issue exploration. Type 'help' for help.\n==========================================================\n\n[ run 1 ]\n>>> issues\nIssue 1\n    Code: 5001\n Message: Possible shell injection Data from [UserControlled] source(s) may reach [RemoteCodeExecution] sink(s)\nCallable: source.convert\n Sources: input\n   Sinks: os.system\nLocation: source.py:9|22|32\nFound 1 issues with run_id 1.\n")),Object(r.b)("p",null,"As expected, we have 1 issue. To select it:"),Object(r.b)("pre",null,Object(r.b)("code",Object(s.a)({parentName:"pre"},{className:"language-text"}),"[ run 1 ]\n>>> issue 1\nSet issue to 1.\n\nIssue 1\n    Code: 5001\n Message: Possible shell injection Data from [UserControlled] source(s) may reach [RemoteCodeExecution] sink(s)\nCallable: source.convert\n Sources: input\n   Sinks: os.system\nLocation: source.py:9|22|32\n")),Object(r.b)("p",null,"View how the data flows from source to sink:"),Object(r.b)("pre",null,Object(r.b)("code",Object(s.a)({parentName:"pre"},{className:"language-text"}),"[ run 1 > issue 1 > source.convert ]\n>>> trace\n     # \u2387  [callable]       [port]      [location]\n     1    leaf             source      source.py:8|17|22\n --\x3e 2    source.convert   root        source.py:9|22|32\n     3    source.get_image formal(url) source.py:9|22|32\n     4    leaf             sink        source.py:5|21|28\n")),Object(r.b)("p",null,"Move to the next callable:"),Object(r.b)("pre",null,Object(r.b)("code",Object(s.a)({parentName:"pre"},{className:"language-text"}),"[ run 1 > issue 1 > source.convert ]\n>>> n\n     # \u2387  [callable]       [port]      [location]\n     1    leaf             source      source.py:8|17|22\n     2    source.convert   root        source.py:9|22|32\n --\x3e 3    source.get_image formal(url) source.py:9|22|32\n     4    leaf             sink        source.py:5|21|28\n")),Object(r.b)("p",null,"Show the source code at that callable:"),Object(r.b)("pre",null,Object(r.b)("code",Object(s.a)({parentName:"pre"},{className:"language-text"}),'[ run 1 > issue 1 > source.get_image ]\n>>> list\nIn source.convert [source.py:9|22|32]\n     4      command = "wget -q https:{}".format(url)\n     5      return os.system(command)\n     6\n     7  def convert() -> None:\n     8      image_link = input("image link: ")\n --\x3e 9      image = get_image(image_link)\n                              ^^^^^^^^^^\n')),Object(r.b)("p",null,"Move to the next callable and show source code:"),Object(r.b)("pre",null,Object(r.b)("code",Object(s.a)({parentName:"pre"},{className:"language-text"}),'[ run 1 > issue 1 > source.get_image ]\n>>> n\n     # \u2387  [callable]       [port]      [location]\n     1    leaf             source      source.py:8|17|22\n     2    source.convert   root        source.py:9|22|32\n     3    source.get_image formal(url) source.py:9|22|32\n --\x3e 4    leaf             sink        source.py:5|21|28\n\n[ run 1 > issue 1 > leaf ]\n>>> list\nIn source.get_image [source.py:5|21|28]\n     1  import os\n     2\n     3  def get_image(url: str) -> int:\n     4      command = "wget -q https:{}".format(url)\n --\x3e 5      return os.system(command)\n                             ^^^^^^^\n     6\n     7  def convert() -> None:\n     8      image_link = input("image link: ")\n     9      image = get_image(image_link)\n')),Object(r.b)("p",null,"Jump to the first callable and show source code:"),Object(r.b)("pre",null,Object(r.b)("code",Object(s.a)({parentName:"pre"},{className:"language-text"}),'[ run 1 > issue 1 > leaf ]\n>>> jump 1\n     # \u2387  [callable]       [port]      [location]\n --\x3e 1    leaf             source      source.py:8|17|22\n     2    source.convert   root        source.py:9|22|32\n     3    source.get_image formal(url) source.py:9|22|32\n     4    leaf             sink        source.py:5|21|28\n\n[ run 1 > issue 1 > leaf ]\n>>> list\nIn source.convert [source.py:8|17|22]\n     3  def get_image(url: str) -> int:\n     4      command = "wget -q https:{}".format(url)\n     5      return os.system(command)\n     6\n     7  def convert() -> None:\n --\x3e 8      image_link = input("image link: ")\n                         ^^^^^\n     9      image = get_image(image_link)\n')),Object(r.b)("h2",{id:"commands"},"Commands"),Object(r.b)("h3",{id:"information-commands"},"Information commands"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"help"),": show the available commands"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"help COMMAND"),": show more info about a specific command"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"state"),": show state and debugging information"),Object(r.b)("h3",{id:"display-commands"},"Display commands"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"runs"),": list all completed static analysis runs"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"issues"),": list all issues for the selected run"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"show"),": show info about selected issue"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"frames"),": show trace frames independently of an issue"),Object(r.b)("h3",{id:"selection-commands"},"Selection commands"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"analysis_output DIR"),": sets the location of the analysis output"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"run ID"),": select a specific run for browsing issues"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"latest_run KIND"),": select the latest run of the given kind"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"issue ID"),": select a specific issue for browsing a trace"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"frame ID"),": select a trace frame"),Object(r.b)("h3",{id:"trace-commands"},"Trace commands"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"trace"),": show a trace of the selected issue"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"prev"),"/",Object(r.b)("inlineCode",{parentName:"p"},"p"),": move backward within the trace"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"next"),"/",Object(r.b)("inlineCode",{parentName:"p"},"n"),": move forward within the trace"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"jump NUM"),": jump within a trace"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"branch"),": show and select alternative trace branches"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"list"),": show source code"),Object(r.b)("h3",{id:"debugging-commands"},"Debugging commands"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"parents"),": show the callers of the current trace frame"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"details"),": additional details about the current trace frame"),Object(r.b)(p,{mdxType:"Internal"}))}b.isMDXComponent=!0},96:function(e,n,t){"use strict";t.d(n,"a",(function(){return u})),t.d(n,"b",(function(){return d}));var a=t(0),s=t.n(a);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,s=function(e,n){if(null==e)return{};var t,a,s={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(s[t]=e[t]);return s}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(s[t]=e[t])}return s}var i=s.a.createContext({}),p=function(e){var n=s.a.useContext(i),t=n;return e&&(t="function"==typeof e?e(n):c(c({},n),e)),t},u=function(e){var n=p(e.components);return s.a.createElement(i.Provider,{value:n},e.children)},b={inlineCode:"code",wrapper:function(e){var n=e.children;return s.a.createElement(s.a.Fragment,{},n)}},m=s.a.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,r=e.parentName,i=l(e,["components","mdxType","originalType","parentName"]),u=p(t),m=a,d=u["".concat(r,".").concat(m)]||u[m]||b[m]||o;return t?s.a.createElement(d,c(c({ref:n},i),{},{components:t})):s.a.createElement(d,c({ref:n},i))}));function d(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,r=new Array(o);r[0]=m;var c={};for(var l in n)hasOwnProperty.call(n,l)&&(c[l]=n[l]);c.originalType=e,c.mdxType="string"==typeof e?e:a,r[1]=c;for(var i=2;i<o;i++)r[i]=t[i];return s.a.createElement.apply(null,r)}return s.a.createElement.apply(null,t)}m.displayName="MDXCreateElement"}}]);